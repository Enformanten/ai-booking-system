
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      <link rel="icon" href="../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.5.3, mkdocs-material-8.5.10">
    
    
      
        <title>School as a graph - Thermo</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.975780f9.min.css">
      
        
        <link rel="stylesheet" href="../assets/stylesheets/palette.2505c338.min.css">
        
      
      

    
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../css/print-site-enum-headings1.css">
    
      <link rel="stylesheet" href="../css/print-site-enum-headings2.css">
    
      <link rel="stylesheet" href="../css/print-site-enum-headings3.css">
    
      <link rel="stylesheet" href="../css/print-site-enum-headings4.css">
    
      <link rel="stylesheet" href="../css/print-site-enum-headings5.css">
    
      <link rel="stylesheet" href="../css/print-site-enum-headings6.css">
    
      <link rel="stylesheet" href="../css/print-site.css">
    
      <link rel="stylesheet" href="../css/print-site-material.css">
    
      <link rel="stylesheet" href="../assets/_mkdocstrings.css">
    
    <script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="" data-md-color-accent="">
  
    
    
      <script>var palette=__md_get("__palette");if(palette&&"object"==typeof palette.color)for(var key of Object.keys(palette.color))document.body.setAttribute("data-md-color-"+key,palette.color[key])</script>
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#school-as-a-graph" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href=".." title="Thermo" class="md-header__button md-logo" aria-label="Thermo" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Thermo
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              School as a graph
            
          </span>
        </div>
      </div>
    </div>
    
      <form class="md-header__option" data-md-component="palette">
        
          
          
          
          <input class="md-option" data-md-color-media="" data-md-color-scheme="default" data-md-color-primary="" data-md-color-accent=""  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_1">
          
            <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_2" hidden>
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 6H7c-3.31 0-6 2.69-6 6s2.69 6 6 6h10c3.31 0 6-2.69 6-6s-2.69-6-6-6zm0 10H7c-2.21 0-4-1.79-4-4s1.79-4 4-4h10c2.21 0 4 1.79 4 4s-1.79 4-4 4zM7 9c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3z"/></svg>
            </label>
          
        
          
          
          
          <input class="md-option" data-md-color-media="" data-md-color-scheme="slate" data-md-color-primary="" data-md-color-accent=""  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_2">
          
            <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_1" hidden>
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 7H7a5 5 0 0 0-5 5 5 5 0 0 0 5 5h10a5 5 0 0 0 5-5 5 5 0 0 0-5-5m0 8a3 3 0 0 1-3-3 3 3 0 0 1 3-3 3 3 0 0 1 3 3 3 3 0 0 1-3 3Z"/></svg>
            </label>
          
        
      </form>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/NTTDATAInnovation/thermo" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.2.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="Thermo" class="md-nav__button md-logo" aria-label="Thermo" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    Thermo
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/NTTDATAInnovation/thermo" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.2.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href=".." class="md-nav__link">
        Introduction
      </a>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_2" type="checkbox" id="__nav_2" >
      
      
      
      
        <label class="md-nav__link" for="__nav_2">
          Machine Learning
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Machine Learning" data-md-level="1">
        <label class="md-nav__title" for="__nav_2">
          <span class="md-nav__icon md-icon"></span>
          Machine Learning
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../ml/usage/" class="md-nav__link">
        Usage
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../ml/workflow/" class="md-nav__link">
        Description
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../ml/dev/" class="md-nav__link">
        Development
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3" type="checkbox" id="__nav_3" checked>
      
      
      
      
        <label class="md-nav__link" for="__nav_3">
          Principles behind the code
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Principles behind the code" data-md-level="1">
        <label class="md-nav__title" for="__nav_3">
          <span class="md-nav__icon md-icon"></span>
          Principles behind the code
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../thermo/" class="md-nav__link">
        The heat equation
      </a>
    </li>
  

            
          
            
              
  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          School as a graph
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        School as a graph
      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#the-booking-system-as-a-graph" class="md-nav__link">
    The booking system as a graph
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#graph-based-first-order-model-for-the-cost-of-heating-rooms" class="md-nav__link">
    Graph-based first-order model for the cost of heating rooms:
  </a>
  
    <nav class="md-nav" aria-label="Graph-based first-order model for the cost of heating rooms:">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#qualitative-discussion" class="md-nav__link">
    Qualitative discussion:
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#mathematical-formulation-of-the-model" class="md-nav__link">
    Mathematical formulation of the model
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#example" class="md-nav__link">
    Example:
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../capacity/" class="md-nav__link">
        Model for capacity
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_4" type="checkbox" id="__nav_4" >
      
      
      
      
        <label class="md-nav__link" for="__nav_4">
          Reference
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Reference" data-md-level="1">
        <label class="md-nav__title" for="__nav_4">
          <span class="md-nav__icon md-icon"></span>
          Reference
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../ref/recommender/" class="md-nav__link">
        Recommender and Recommendation
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../ref/ranker/" class="md-nav__link">
        Rankers
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../ref/cost/" class="md-nav__link">
        Costs
      </a>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_4_4" type="checkbox" id="__nav_4_4" >
      
      
      
      
        <label class="md-nav__link" for="__nav_4_4">
          Machine Learning workflow
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Machine Learning workflow" data-md-level="2">
        <label class="md-nav__title" for="__nav_4_4">
          <span class="md-nav__icon md-icon"></span>
          Machine Learning workflow
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../ref/ml/get_data/" class="md-nav__link">
        get_data.py
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../ref/ml/preprocessing/" class="md-nav__link">
        preprocessing.py
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../ref/ml/train/" class="md-nav__link">
        train.py
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../ref/ml/evaluate/" class="md-nav__link">
        evaluate_model.py
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#the-booking-system-as-a-graph" class="md-nav__link">
    The booking system as a graph
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#graph-based-first-order-model-for-the-cost-of-heating-rooms" class="md-nav__link">
    Graph-based first-order model for the cost of heating rooms:
  </a>
  
    <nav class="md-nav" aria-label="Graph-based first-order model for the cost of heating rooms:">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#qualitative-discussion" class="md-nav__link">
    Qualitative discussion:
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#mathematical-formulation-of-the-model" class="md-nav__link">
    Mathematical formulation of the model
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#example" class="md-nav__link">
    Example:
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                


    <a href="../print_page/" title="Print Site" class="md-content__button md-icon">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M18 3H6v4h12m1 5a1 1 0 0 1-1-1 1 1 0 0 1 1-1 1 1 0 0 1 1 1 1 1 0 0 1-1 1m-3 7H8v-5h8m3-6H5a3 3 0 0 0-3 3v6h4v4h12v-4h4v-6a3 3 0 0 0-3-3Z"/></svg>
    </a>



                  

  <a href="https://github.com/NTTDATAInnovation/thermo/edit/master/docs/graph.md" title="Edit this page" class="md-content__button md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20.71 7.04c.39-.39.39-1.04 0-1.41l-2.34-2.34c-.37-.39-1.02-.39-1.41 0l-1.84 1.83 3.75 3.75M3 17.25V21h3.75L17.81 9.93l-3.75-3.75L3 17.25Z"/></svg>
  </a>


<h1 id="school-as-a-graph">School as a graph</h1>
<p><em>Sprint 3 - AI version 1</em></p>
<p>Let every school be represented by one or more graphs, where each node represents a room in the school. In this representation, two rooms share an edge if they share a wall (or a floor-ceiling in case of the school having more than one floor).</p>
<p>In this version, we represent the school as an undirected and unweighted graph, <span class="arithmatex">\(G_s\)</span>. If the graph can be split into several subgraphs, we choose this representation. From here on we assume, for the sake of clarity, that the school is represented by a single, indivisible graph, but the discussion may be extended to multiple graphs in later versions.</p>
<p>Let <span class="arithmatex">\(N_r\)</span> be the number of rooms in the school and let <span class="arithmatex">\(i=0, 1, ..., N_r-1\)</span> denote the <span class="arithmatex">\(i\)</span>-th room of the school. Then, the <em>adjacency matrix</em> <span class="arithmatex">\(A_s\)</span> of the school is given by:</p>
<div class="arithmatex">\[
    \left( A_s\right)_{ij} =
    \begin{cases}
1 &amp; \text{if } i \text{ and } j \text{ share a wall}, \\
0 &amp; \text{otherwise}.
\end{cases}
\]</div>
<h2 id="the-booking-system-as-a-graph">The booking system as a graph</h2>
<p>We also represent the booking system as a graph <span class="arithmatex">\(G\)</span>, with <span class="arithmatex">\(N_r \times N_t\)</span> nodes, where <span class="arithmatex">\(N_t\)</span> is the number of time slots for a day. The graph <span class="arithmatex">\(G\)</span> consists of <span class="arithmatex">\(N_t\)</span> copies of the graph <span class="arithmatex">\(G_s\)</span>, where each copy represents the rooms of the school at a given time slot. Each room is connected to the rooms it shares a wall with, plus to the version of itself in the graphs representing the time-slots that take place immediately before and immediately after.</p>
<p>The adjacency matrix for graph <span class="arithmatex">\(G\)</span>, <span class="arithmatex">\(A\)</span>, is a squared matrix of size <span class="arithmatex">\(N_t N_r \times N_t N_r\)</span> that can be built in block form as follows:</p>
<div class="arithmatex">\[
A = \left(\begin{matrix}
A_s &amp; \lambda\mathbb{I} &amp; \mathbb{O} &amp;\cdots &amp; \mathbb{O} \\
\lambda\mathbb{I} &amp; A_s &amp; \lambda\mathbb{I} &amp; \cdots &amp; \mathbb{O} \\
\mathbb{O} &amp; \lambda\mathbb{I} &amp; A_s  &amp; \cdots &amp; \mathbb{O} \\
\vdots &amp; \vdots &amp; \vdots &amp; \ddots &amp; \vdots \\
\mathbb{O} &amp; \mathbb{O} &amp; \mathbb{O} &amp;\cdots &amp; A_s\\
\end{matrix} \right),
\]</div>
<p>where all blocks are of size <span class="arithmatex">\(N_r \times N_r\)</span>,  <span class="arithmatex">\(\mathbb{I}\)</span> is the <em>identity matrix</em>, <span class="arithmatex">\(\mathbb{O}\)</span> is the <em>null matrix</em> and and <span class="arithmatex">\(\lambda\)</span> is a scalar coefficient representing the relative importance of time respect to space (more about this in the next section).</p>
<h2 id="graph-based-first-order-model-for-the-cost-of-heating-rooms">Graph-based first-order model for the cost of heating rooms:</h2>
<p>Let us discuss how to compute the cost of heating a new room given some rooms have already been booked.</p>
<h3 id="qualitative-discussion">Qualitative discussion:</h3>
<p>As a first order approximation, we can consider that the cost of heating a given room is the cost of heating that room if it was the only room used that day, minus the energy savings coming from other rooms that have already been booked.
We assume those energy savings come from three sources:
*  Heating a room that shares a wall in the same time slot with a room that is already in use,
* The room is already warm because it has been used in the previous time slot,
* If this room is booked, it will already be warm when used in the next time slot.</p>
<p>Intuitively we can think of this model as each room as having an intrinsic cost and then receiving messages from its nearest neighbors in graph <span class="arithmatex">\(G\)</span> telling it to reduce its cost if they are already booked. The optimal rooms to book will be those that receive the most (or the most important) messages, thus, having the lowest cost.</p>
<p>The parameter <span class="arithmatex">\(\lambda\)</span> in the definition of <span class="arithmatex">\(G\)</span> controls the relative importance of the messages:
- if <span class="arithmatex">\(\lambda &gt; 1\)</span>, booking the same room over time is favored over booking adjacent rooms
- if <span class="arithmatex">\(\lambda &lt; 1\)</span>, booking adjacent rooms is favored over booking the same room at subsequent time slots
- and if <span class="arithmatex">\(\lambda = 1\)</span>, the space and time components are treated on equal footing.</p>
<p>The following section discusses a way of formalizing and implementing this model.</p>
<h3 id="mathematical-formulation-of-the-model">Mathematical formulation of the model</h3>
<p>Let <span class="arithmatex">\(s\)</span> be the <em>schedule</em> vector, of size <span class="arithmatex">\(N_r N_t\)</span>, such that</p>
<div class="arithmatex">\[
s_i = \begin{cases}
1 &amp; \text{if room } (i \mod N_r) \text{ room is booked} \\
 &amp; \text{at time } (i \div N_t), \\
0 &amp; \text{otherwise};
\end{cases}
\]</div>
<p>where <span class="arithmatex">\(\div\)</span> represents the integer division and $ \cdot\mod{\cdot}$ represents its reminder.</p>
<p>Equipped with this notation, we can write the first-order approximation of the cost as follows:</p>
<div class="arithmatex">\[
c = c_a - \eta As,
\]</div>
<p>where <span class="arithmatex">\(c\)</span> is the cost vector representing the cost of heating the room, <span class="arithmatex">\(c_a\)</span> is a vector representing the cost of heating the room if this room at this time slot was the only room booked that day, and <span class="arithmatex">\(\eta\)</span> is a scalar coefficient representing the relative importance of the messages <span class="arithmatex">\(As\)</span> compared to the alone costs <span class="arithmatex">\(c_a\)</span>.</p>
<h2 id="example">Example:</h2>
<p>Let the school have 4 rooms, whose connectivity is given by the following spatial adjacency matrix:</p>
<div class="arithmatex">\[
A_s = \left(\begin{matrix}
0 &amp; 1 &amp; 1 &amp; 0 \\
1 &amp; 0 &amp; 0 &amp; 1 \\
1 &amp; 0 &amp; 0 &amp; 1 \\
0 &amp; 1 &amp; 1 &amp; 0
\end{matrix} \right).
\]</div>
<p>The identity matrix for 4 rooms is given by:</p>
<div class="arithmatex">\[
\mathbb{I} = \left(\begin{matrix}
1 &amp; 0 &amp; 0 &amp; 0 \\
0 &amp; 1 &amp; 0 &amp; 0 \\
0 &amp; 0 &amp; 1 &amp; 0 \\
0 &amp; 0 &amp; 0 &amp; 1
\end{matrix} \right)
\]</div>
<p>and the null matrix by:</p>
<div class="arithmatex">\[
\mathbb{O} = \left(\begin{matrix}
0 &amp; 0 &amp; 0 &amp; 0 \\
0 &amp; 0 &amp; 0 &amp; 0 \\
0 &amp; 0 &amp; 0 &amp; 0 \\
0 &amp; 0 &amp; 0 &amp; 0
\end{matrix} \right).
\]</div>
<p>Lets assume we have three time slots for the day in question, <span class="arithmatex">\(t=-1,0,1\)</span>. The adjacency matrix <span class="arithmatex">\(A\)</span> for the booking graph <span class="arithmatex">\(G\)</span> looks like:</p>
<div class="arithmatex">\[
A = \left(\begin{matrix}
A_s &amp; \lambda\mathbb{I} &amp; \mathbb{O} \\
\lambda\mathbb{I} &amp; A_s &amp; \lambda\mathbb{I} \\
\mathbb{O} &amp; \lambda\mathbb{I} &amp; A_s  \\
\end{matrix} \right).
\]</div>
<p>Lets say that the 0-th room was booked at time 0. Then, the schedule vector s looks like:</p>
<div class="arithmatex">\[
s = \left(\begin{matrix}
0 &amp; 0 &amp; 0 &amp; 0 \\
1 &amp; 0 &amp; 0 &amp; 0 \\
0 &amp; 0 &amp; 0 &amp; 0 \\
\end{matrix} \right),
\]</div>
<p>where, <span class="arithmatex">\(s\)</span> has been displayed in a rooms <span class="arithmatex">\(\times\)</span> time_slots format for convenience, but please keep in mind that it is a 1-D vector.</p>
<p>The messages <span class="arithmatex">\(As\)</span> look like:</p>
<div class="arithmatex">\[
As = \left(\begin{matrix}
\lambda &amp; 0 &amp; 0 &amp; 0 \\
0 &amp; 1 &amp; 1 &amp; 0 \\
\lambda &amp; 0 &amp; 0 &amp; 0 \\
\end{matrix} \right),
\]</div>
<p>and, if we assume that all rooms where equally costly to heat alone, that is, <span class="arithmatex">\(c_a = k (1,1,\dots,1)\)</span>, then the cost of new possible bookings is:</p>
<div class="arithmatex">\[
c = \left(\begin{matrix}
k-\eta\lambda &amp; k &amp; k &amp; k \\
k &amp; k-\eta &amp; k-\eta &amp; k \\
k-\eta\lambda &amp; k &amp; k &amp; k \\
\end{matrix} \right),
\]</div>
<p>where <span class="arithmatex">\(k\)</span>, <span class="arithmatex">\(\eta\)</span> and <span class="arithmatex">\(\lambda\)</span> are positive numbers. Note that the room that is already booked doesn't have an outstandingly high cost to be re-booked, this is to be corrected in subsequent versions of the model.</p>
<p>If <span class="arithmatex">\(\lambda &gt; 1\)</span>, the model suggest that the optimal room to book is the 0-th room at time slots <span class="arithmatex">\(-1\)</span> or <span class="arithmatex">\(1\)</span>, while if its smaller than 1, then its rooms 1 and 2 at time 0 that are optimal for booking.</p>





                

              </article>
            </div>
          
          
        </div>
        
      </main>
      
        <footer class="md-footer">
  
    
    <nav class="md-footer__inner md-grid" aria-label="Footer" >
      
        
        <a href="../thermo/" class="md-footer__link md-footer__link--prev" aria-label="Previous: The heat equation" rel="prev">
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
          </div>
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Previous
              </span>
              The heat equation
            </div>
          </div>
        </a>
      
      
        
        <a href="../capacity/" class="md-footer__link md-footer__link--next" aria-label="Next: Model for capacity" rel="next">
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Next
              </span>
              Model for capacity
            </div>
          </div>
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4Z"/></svg>
          </div>
        </a>
      
    </nav>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    <script id="__config" type="application/json">{"base": "..", "features": [], "search": "../assets/javascripts/workers/search.16e2a7d4.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version.title": "Select version"}}</script>
    
    
      <script src="../assets/javascripts/bundle.5a2dcb6a.min.js"></script>
      
        <script src="../js/print-site.js"></script>
      
        <script src="../javascripts/mathjax.js"></script>
      
        <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
      
        <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
      
    
    
  </body>
</html>